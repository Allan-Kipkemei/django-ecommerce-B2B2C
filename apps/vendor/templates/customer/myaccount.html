{% extends 'core/navigation.html' %}

{% block title %}My account | {{ request.session.username }} - {% endblock %}
{% block content %}
<div class="site__body">
    <div class="page-header">
        <div class="page-header__container container">
            <div class="page-header__breadcrumb">
                <h2 class="subtitle"><strong>Account Information</strong></h2>

                <div class="box">
            
                    <p><strong>Name: </strong>{{ request.session.username }}</p>
                    <p><strong>E-mail: </strong>{{ request.user.email }}</p>
                    <p><strong>Address: </strong>{{ request.session.address }}</p>
                    <p><strong>Phone: </strong>{{ request.session.phone}}</p>
                    {% if request.session.company_code %}
                    <p><strong>TIN:</strong>
                         {{ request.session.company_code }} 
                    </p>
                    {% else %}
                     <p>Hello</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-9 mt-4 mt-lg-0">
                <h2>My Orders</h2>
            </div>
            {% for order in orders %} 
            <div class="card">
                <div class="card-header">
                    <article class="message is-light">
                        <div class="message-header">
                            <p><strong>Status: </strong>{{ order.status }} - <strong>Date & Time: </strong>{{ order.created_at }}</p>
                            <p><strong>Shipped date: </strong>{{ order.shipped_date }}</p>
                            <p><strong>Arrived date: </strong>{{ order.arrived_date }}</p>
                        </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-table">
                    <div class="table-responsive-sm">
                        <table >
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Quantity</th>
                                    <th>Price(VAT excl.)</th>
                                    <th>VAT</th>
                                    <th>Price(VAT incl.)</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in order.items %} 
                                <tr>
                                    <td><a href="/">{{item.product_title}}</a></td>
                                    <td>{{item.quantity}}</td>
                                    <td>{{item.price_no_vat}}</td>
                                    <td>{{item.tax}}</td>
                                    <td>{{item.price}}</td>
                                    <td>{{item.subtotal}}</td>
                                </tr>
                                {% endfor %}
                                <tr>
                                    <td><strong>Total quantity</strong></td>
                                    <td><strong>{{order.total_quantity}}</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                {% if order.coupon_discount != "" %} 
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>Coupon discount</td>
                                    <td>{{order.coupon_discount}}</td>
                                </tr>
                                {% endif %}
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><strong>Delivery cost</strong></td>
                                    <td><strong>{{order.delivery_cost}}</strong></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><strong>total(VAT excl.)</strong></td>
                                    <td><strong>FRW {{order.total_vat_exl}}</strong></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><strong>VAT</strong></td>
                                    <td><strong>FRW {{order.vat_cost}}</strong></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><strong>Grand Total(VAT incl)</strong></td>
                                    <td><strong>{{order.grand_paid_amount}}</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="card-divider"></div>
    <div class="card-footer">
        <ul class="pagination justify-content-center">
            <li class="page-item disabled">
                <a class="page-link page-link--with-arrow" href="" aria-label="Previous">
                    <svg class="page-link__arrow page-link__arrow--left" aria-hidden="true" width="8px" height="13px">
                        <use xlink:href="images/sprite.svg#arrow-rounded-left-8x13"></use>
                    </svg>
                </a>
            </li>
            <li class="page-item"><a class="page-link" href="">1</a></li>
            <li class="page-item active"><a class="page-link" href="">2 <span class="sr-only">(current)</span></a></li>
            <li class="page-item"><a class="page-link" href="">3</a></li>
            <li class="page-item">
                <a class="page-link page-link--with-arrow" href="" aria-label="Next">
                    <svg class="page-link__arrow page-link__arrow--right" aria-hidden="true" width="8px" height="13px">
                        <use xlink:href="images/sprite.svg#arrow-rounded-right-8x13"></use>
                    </svg>
                </a>
            </li>
        </ul>
    </div>
</div>
{% endblock %}